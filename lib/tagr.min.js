/*
 Tagr, HTML manipulation for webapps. MIT Licensed.
*/
var h=null;
(function(){function y(a,b){function c(){this.constructor=a}for(var e in b)D.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.t=b.prototype}var m,p,t,u,v,q,z,r,A,o,i,B,s,C,w,n=[].slice,D={}.hasOwnProperty;B=function(){return name.toLowerCase().replace(/\-[a-z]/g,function(a){return a[1].toUpperCase()})};u={"for":"htmlFor",v:"accessKey",A:"codeBase",D:"frameBorder",F:"frameSpacing",M:"noWrap",L:"maxLength","class":"className",N:"readOnly",K:"longDesc",Q:"tabIndex",P:"rowSpan",B:"colSpan",
enctype:"encType",J:"isMap",S:"useMap",w:"cellPadding",z:"cellSpacing"};t=function(){function a(){}a.name="EventEmitter";a.prototype.g=function(b){return this.hasOwnProperty.call(this.d!=h?this.d:this.d={},b)?this.d[b]:this.d[b]=[]};a.prototype.m=function(){var b,c,e,a,f,g;e=arguments[0];b=2<=arguments.length?n.call(arguments,1):[];g=this.g(e);a=0;for(f=g.length;a<f;a++)c=g[a],c.apply(this,b);this.g(e)};return a}();v=function(a){var b;a==h&&(a="all");b=document.createElement("style");b.type="text/css";
b.media=a;document.getElementsByTagName("head")[0].appendChild(b);return b};r=function(){var a,b,c,e;e=/^loade|c/.test(document.readyState);c=[];a=function(b){var a;e=!0;for(a=[];b=c.shift();)a.push(b());return a};if(document.documentElement.doScroll)return document.attachEvent("onreadystatechange",b=function(){if(/^c/.test(document.readyState))return document.detachEvent("onreadystatechange",b),a()}),function(b){return self!==top?e?b():c.push(b):function(){try{testEl.doScroll("left")}catch(c){return setTimeout(function(){return ready(b)},
50)}return b()}()};if(document.addEventListener!=h)return document.addEventListener("DOMContentLoaded",b=function(){document.removeEventListener("DOMContentLoaded",b,!1);return a()},!1),function(b){return e?b():c.push(b)}}();A=function(a,b){var c,e,d;if(window.getComputedStyle)return c=a.ownerDocument.defaultView.getComputedStyle(a,h),c=c!=h?c.getPropertyValue(b):void 0,"opacity"===b&&""===c?"1":c;if(a.currentStyle)return c=(e=a.currentStyle[b])!=h?e:a.currentStyle[B()],!/^\d+(?:px)?$/i.test(ret)&&
/^\d/.test(ret)&&(d=[a.style.left,a.runtimeStyle.left],e=d[0],d=d[1],a.runtimeStyle.left=a.currentStyle.left,a.style.left="font-size"===b?"1em":c||0,c=a.style.pixelLeft+"px",e=[e,d],a.style.left=e[0],a.runtimeStyle.left=e[1]),c};(function(){var a;return document.documentElement.querySelector==h&&document.documentElement.currentStyle!=h?(a=new v,function(b,c){var e,d;e=(d=c.match(/(?:^|\s+)([^.#:\s]+)(?:[.#:]+[^:.#()\s]+)*\s*$/))!=h?d[1]:void 0;a.addRule(c,"foo:bar");var f,g,j;g=e!=h?b.R(e):b.all;
j=[];d=0;for(f=g.length;d<f;d++)e=g[d],"bar"===e.currentStyle.C&&j.push(e);a.removeRule(0);return j}):function(b,c){return b.querySelectorAll(c)}})();m=function(){function a(b,c){this.c=b;this.f=c!=h?c:{};this.hash={};this.length=0}a.name="ArrayHash";a.prototype.get=function(b){var c;return((c=this.f)!=h?c.get:void 0)!=h?this.f.get(b):this.hash["@"+b]};a.prototype.set=function(b,c){var e,a,f;if("object"===typeof b){for(e in b)a=b[e],this.set(e,a);return this.c}if("object"===typeof c&&c.length!=h){e=
0;for(f=c.length;e<f;e++)a=c[e],this.set(b,a);return this.c}Object.prototype.hasOwnProperty.call(this.hash,"@"+b)||(this[this.length++]=b);(a=this.f)!=h&&"function"===typeof a.set&&a.set(b,c);this.hash["@"+b]=c;return this.c};a.prototype.remove=function(b){var c,a,d,f,g;if(!Object.prototype.hasOwnProperty.call(this.hash,"@"+b))return this.c;c=d=0;for(f=this.length;d<f;c=++d)if(a=this[c],a===b){a=d=c;for(f=this.length-1;c<=f?d<f:d>f;a=c<=f?++d:--d)this[a]=this[a+1];break}this.length--;(g=this.f)!=
h&&"function"===typeof g.remove&&g.remove(b);delete this.hash["@"+b];return this.c};return a}();o=function(){var a;a=0;return function(b){var c;return(c=b.o)!=h?c:b.o=a++}}();p=function(){function a(){this.e={}}var b;a.name="DomMap";b=function(a){for(var b in a)return!1;return!0};a.prototype.set=function(a,b,d){var f,g,j;return((j=(f=this.e)[g=o(a)])!=h?j:f[g]={})[b]=d};a.prototype.get=function(a,b){var d;return(d=this.e[o(a)])!=h?d[b]:h};a.prototype.remove=function(a,e){var d;if(d=this.e[o(a)])delete d[e],
b(d)&&delete this.e[o(a)];return h};return a}();i=function(){var a;a=1<=arguments.length?n.call(arguments,0):[];return i.create.apply(i,a)};i.p=["data-tagr"];i.create=function(a,b){var c,e,d;b==h&&(b={});c=document.createElement(a);for(e in b)d=b[e],c.setAttribute(e,d);return new q(c)};i.parse=function(a){var b,c,e,d;if("string"===typeof a)return a;d=a[0];e=a[1];c=3<=a.length?n.call(a,2):[];a=i.create(d,e);a.append.apply(a,function(){var a,e,d;d=[];a=0;for(e=c.length;a<e;a++)b=c[a],d.push(i.parse(b));
return d}());return a};i.O=r;i.b=new p;i.getContext=function(a){var b;if(1!==a.nodeType)throw Error("Cannot create Tagr context from non-element");if((b=i.b.get(a,"tagr"))==h)i.b.set(a,"tagr",b=new q(a));return b};i.I=function(a){if(1!==a.nodeType)throw Error("Cannot create Tagr context of non-element");if((a=i.b.get(a,"tagr"))==h)throw Error("No Tagr wrapper exists for this element.");return a};i.T=function(a,b){var c;a==h&&(a="div");b==h&&(b={});document.write("<"+a+"></"+a+">");c=document.getElementsByTagName(a);
c=i.getContext(c[c.length-1]).set(b);console.log(c);return c};i.q=q=function(a){function b(a,e){var d,f,g,j,l,k=this;this.a=a;this.parent=e;this.k=new m(this,{set:function(a){var b;return k.a.className=""+function(){var c,e,d,f;d=(c=this.a.className.match(/\S+/g))!=h?c:[];f=[];c=0;for(e=d.length;c<e;c++)b=d[c],b!==a&&f.push(b);return f}.call(k).join("")+" "+a},get:function(a){return!!k.a.className.match(RegExp("\\b"+a+"\\b"))},remove:function(a){var b;return k.a.className=function(){var c,e,d,f;d=
(c=this.a.className.match(/\S+/g))!=h?c:[];f=[];c=0;for(e=d.length;c<e;c++)b=d[c],b!==a&&f.push(b);return f}.call(k).join("")}});j=this.a.className.match(/\S+/g)||[];f=0;for(g=j.length;f<g;f++)d=j[f],console.log(d),this.k.set(d);this.style=new m(this,{set:function(a,b){return k.a.style[a]=b},get:function(a){return k.a.style[a]},remove:function(a){return delete k.a.style[a]}});this.length=this.a.childNodes.length;l=this.a.childNodes;f=g=0;for(j=l.length;g<j;f=++g)d=l[f],this[f]=1===d.nodeType?new b(d,
this):d.u}y(b,a);b.name="Tagr";b.prototype.h=function(a){this.parent=a;i.b.set(this.a,"tagr",this)};b.prototype.i=function(){delete this.parent;i.b.remove(this.a,"tagr")};b.prototype.j=function(){this.a.hasAttribute("data-tagr")||this.a.setAttribute("data-tagr",o(this.a));return this.a.getAttribute("data-tagr")};b.prototype.get=function(a){var b;return this.a[(b=u[a])!=h?b:a]};b.prototype.set=function(a,b){var d,f;if("object"===typeof a){for(d in a)f=a[d],this.set(d,f);return this}this.m("change:"+
a,b);return this.a[(f=u[a])!=h?f:a]=b};b.prototype.remove=function(a){return this.a.removeAttribute(a)};b.prototype.splice=function(){var a,b,d,f,g,j,l,k,x,m;f=arguments[0];d=arguments[1];a=3<=arguments.length?n.call(arguments,2):[];if(0>f||isNaN(f))throw"Invalid index";if(d){j=[];for(g=l=0;0<=d?l<d:l>d;g=0<=d?++l:--l)b=this[f+g],this.a.removeChild(this.a.childNodes[f]),"object"===typeof b&&b.i(),delete this[f+g],j.push(b);l=j}if(d>a.length){g=b=j=f+d;for(k=this.length;j<=k?b<k:b>k;g=j<=k?++b:--b)this[g-
d]=this[g]}else if(a.length>d)for(g=b=j=this.length+a.length-1;j<=f?b<f:b>f;g=j<=f?++b:--b)this[g]=this[g-a.length];if(a.length){k=this.a.childNodes[f];g=x=0;for(m=a.length;x<m;g=++x){b=a[g];"object"===typeof b&&(b!=h?b.constructor:void 0)===Array?(b=i.parse(b),j=b.a):j="string"===typeof b?document.createTextNode(b):b.a;if(j.parentNode)throw Error("Must remove element before appending elsewhere.");this.a.insertBefore(j,k);"object"===typeof b&&b.h(this);this[f+g]=b}}this.length+=-d+a.length;return l};
b.prototype.append=function(){var a;a=1<=arguments.length?n.call(arguments,0):[];this.splice.apply(this,[this.length,0].concat(n.call(a)));return this};b.prototype.remove=function(a){this.splice(a,1);return this};return b}(t);w=["forEach","slice","map","indexOf"];r=function(a){q.prototype[a]=function(){var b;b=1<=arguments.length?n.call(arguments,0):[];return Array.prototype[a].apply(this,b)}};s=0;for(C=w.length;s<C;s++)p=w[s],r(p);i.s=function(a){function b(a,b){var e=this;this.l=a;this.n=b;this.style=
new m(this,{set:function(a,b){var d,f;d="[data-tagr='"+e.l.j()+"'] "+e.n;f=c();f.insertRule(""+d+" { "+a+": "+b+" }",f.cssRules.length)}})}var c,e;y(b,a);b.name="TagrQuery";e={};c=function(a){var b;a==h&&(a="all");if(e[a]!=h)return e[a];b=new v(a);return e[a]=b.sheet||b.styleSheet};return b}(t);i.r=z=function(){function a(){var a,c,e,d,f=this;a=1<=arguments.length?n.call(arguments,0):[];this.length=a.length;e=0;for(d=a.length;e<d;e++)c=a[e],this[c]=a[c];new m(this,{set:function(a,b){var c,d,e,i;i=
[];d=0;for(e=f.length;d<e;d++)c=f[d],i.push(c.set(a,b));return i}});new m(this,{set:function(a){var b,c,d,e;e=[];c=0;for(d=f.length;c<d;c++)b=f[c],e.push(b.style.set(a));return e},remove:function(a){var b,c,d,e;e=[];c=0;for(d=f.length;c<d;c++)b=f[c],e.push(b.style.remove(a));return e}})}a.name="TagrList";return a}();i.list=function(){var a;a=1<=arguments.length?n.call(arguments,0):[];return function(a,c,e){e.prototype=a.prototype;e=new e;a=a.apply(e,c);c=typeof a;return"object"==c||"function"==c?
a||e:e}(z,a,function(){})};i.view={G:function(a,b){var c,e,d,f;c=a.a.getBoundingClientRect();if(b!=h)for(e in f=b.a.getBoundingClientRect(),f)d=f[e],c[e]-=d;return c},H:function(a,b){return A(a.a,b)}}}).call(this);
