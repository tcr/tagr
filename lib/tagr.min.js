/*
 Tagr, Solid HTML manipulation for webapps. MIT Licensed.
*/
var g=null,j=!1;
function n(){function a(a){"undefined"!==typeof a.useNativeQSA&&(da=!a.useNativeQSA?b:za?c:b)}function b(a,b){var c=[],e,l,h,B,a=a.replace(Aa,"$1");if(e=a.match(Ba)){B=f(e[2]);e=b.a[U](e[1]||"*");l=0;for(h=e.length;l<h;l++)B.test(e[l].get("class"))&&(c[c.length]=p.getContext(e[l]));return c}i(e=a.split(","),ea(b,function(a,ya,e){B=Ca(ya,a);l=0;for(h=B.length;l<h;l++)if(!a.parent||e||d(B[l],b))c[c.length]=B[l]}));return 1<e.length&&1<c.length?V(c):c}function c(a,c){var d=[],e,l;try{if(!c.parent||!fa.test(a))return o(c.a.querySelectorAll(a));
i(e=a.split(","),ea(c,function(a,b){l=a.a.querySelectorAll(b);1==l.length?d[d.length]=l.item(0):l.length&&(d=d.concat(o(l)))}));return 1<e.length&&1<d.length?V(d):d}catch(f){}return b(a,c)}function d(a,b){return b!==a&&b.a.contains(a.a)}function e(){this.t={}}function f(a){return ga.c(a)||ga.d(a,"(^|\\s+)"+a+"(\\s+|$)",1)}function i(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c])}function h(a){for(var b=[],c=0,d=a.length;c<d;++c)W(a[c])?b=b.concat(a[c]):b[b.length]=a[c];return b}function o(a){for(var b=
0,c=a.length,d=[];b<c;b++)d[b]=p.getContext(a[b]);return d}function ha(a){for(;(a=a.previousSibling)&&1!=a[C];);return a}function X(a){return a.match(Da)}function Y(a,b,c,d,e,i,h,m,u,Wa,Ea){var o,k,w;if(1!==this[C]||b&&"*"!==b&&this[Z]&&this[Z].toLowerCase()!==b||c&&(o=c.match(Fa))&&o[1]!==this.id)return j;if(c&&(w=c.match(Ga)))for(a=w.length;a--;)if(!f(w[a].slice(1)).test(this.className))return j;if(u&&z.A[u]&&!z.A[u](this,Ea))return j;if(d&&!h)for(k in u=this.z(),u)if(Object.prototype.hasOwnProperty.call(u,
k)&&k==e)return this;return d&&!Ha(i,this.get(e)||"",h)?j:this}function k(a){return ia.c(a)||ia.d(a,a.replace(Ia,"\\$1"))}function Ha(a,b,c){switch(a){case "=":return b==c;case "^=":return b.match(m.c("^="+c)||m.d("^="+c,"^"+k(c),1));case "$=":return b.match(m.c("$="+c)||m.d("$="+c,k(c)+"$",1));case "*=":return b.match(m.c(c)||m.d(c,k(c),1));case "~=":return b.match(m.c("~="+c)||m.d("~="+c,"(?:^|\\s+)"+k(c)+"(?:\\s+|$)",1));case "|=":return b.match(m.c("|="+c)||m.d("|="+c,"^"+k(c)+"(-|$)",1))}return 0}
function Ca(a,b){var c=[],d=[],e,f,h,m,u;e=b;var k=w.c(a)||w.d(a,a.split(ja)),o=a.match(ka);if(!k.length)return c;f=(k=k.slice(0)).pop();if(k.length&&(h=k[k.length-1].match(la)))e=ma(b,h[1]);if(!e)return c;h=X(f);if(e!==b&&9!==e[C]&&o&&/^[+~]$/.test(o[o.length-1])){for(f=[];e=e.nextSibling;)1==e[C]&&(h[1]?h[1]==e[Z].toLowerCase():1)&&(f[f.length]=e);e=f}else e=e[U](h[1]||"*");m=e;e=0;for(f=m.length;e<f;e++)if(u=Y.apply(m[e],h))c[c.length]=u;if(!k.length)return c;i(c,function(a){na(a,k,o)&&(d[d.length]=
a)});return d}function na(a,b,c,e){function f(a,d,e){for(;e=Ja[c[d]](e,a);)if(G(e)&&Y.apply(e,X(b[d])))if(d){if(h=f(e,d-1,e))return h}else return e}var h;return(h=f(a,b.length-1,a))&&(!e||d(h,e))}function G(a){var b;return a&&"object"===typeof a&&(b=a[C])&&(1==b||9==b)}function V(a){var b=[],c,d;c=0;a:for(;c<a.length;++c){for(d=0;d<b.length;++d)if(b[d]==a[c])continue a;b[b.length]=a[c]}return b}function W(a){return"object"===typeof a&&isFinite(a.length)}function ma(a,b){var c;return(c=a.a.ownerDocument.getElementById(b))&&
c&&(c=p.getContext(c))&&(d(c,a)||c==a)&&c}function z(a,b){var c,e;if(!b||!a)return[];if(a===window||G(a))return!b||a!==window&&G(b)&&d(a,b)?[a]:[];if(a&&W(a))return h(a);if(c=a.match(Ka)){if(c[1])return(e=ma(b,c[1]))?[e]:[];if(c[2])return o(b.a[U](c[2]));if(La&&c[3])return o(b.a[oa](c[3]))}return da(a,b)}function ea(a,b){return function(c){var d,e;if(fa.test(c)){if(9!==a[C]){if(!(e=d=a.get("id")))a.set("id",e="__qwerymeupscotty");b(a.parent||a,'[id="'+e+'"]'+c,!0);d||a.remove("id")}}else c.length&&
b(a,c,j)}}var H=this.document||{},Ma=H.documentElement,oa="getElementsByClassName",U="getElementsByTagName",Z="tagName",C="nodeType",da,Fa=/#([\w\-]+)/,Ga=/\.[\w\-]+/g,la=/^#([\w\-]+)$/,Ba=/^([\w]+)?\.([\w\-]+)$/,fa=/(^|,)\s*[>~+]/,Aa=/^\s+|\s*([,\s\+\~>]|$)\s*/g,pa=/[\s\>\+\~]/,qa=/(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/,Ia=/([.*+?\^=!:${}()|\[\]\/\\])/g,Ka=RegExp(la.source+"|"+/^([\w\-]+)$/.source+"|"+/^\.([\w\-]+)$/.source),ka=RegExp("("+pa.source+")"+qa.source,"g"),
ja=RegExp(pa.source+qa.source),Da=RegExp(/^(\*|[a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/.source+"("+/\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/.source+")?("+/:([\w\-]+)(\(['"]?([^()]+)['"]?\))?/.source+")?"),Ja={" ":function(a){return a&&a!==Ma&&a.parentNode},">":function(a,b){return a&&a.parentNode==b.parentNode&&a.parentNode},"~":function(a){return a&&a.previousSibling},"+":function(a,b,c,d){return!a?j:(c=ha(a))&&(d=ha(b))&&c==d&&c}};e.prototype={c:function(a){return this.t[a]||
void 0},d:function(a,b,c){b=c?RegExp(b):b;return this.t[a]=b}};var ga=new e,ia=new e,m=new e,w=new e,La=!!H[oa],za=H.querySelector&&H.querySelectorAll;a({Y:!0});z.M=a;z.X=V;z.T=function(a,b,c){if(G(b))return a==b;if(W(b))return!!~h(b).indexOf(a);for(var d=b.split(","),e;b=d.pop();)if(e=w.c(b)||w.d(b,b.split(ja)),b=b.match(ka),e=e.slice(0),Y.apply(a,X(e.pop()))&&(!e.length||na(a,e,b,c)))return!0;return j};z.A={};return z}
"undefined"!=typeof module&&module.o?module.o=n():"function"==typeof this.define&&this.define.amd?define("queryr",n):this.queryr=n();var p,q=this.J;function r(a,b){return Array.prototype.slice.call(a,b)}function s(a){return"[object Array]"===Object.prototype.toString.call(a)}function t(a){return"[object Object]"==Object.prototype.toString.call(a)}function aa(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1}function ba(a){return String(a).replace(/^\s+|\s+$/g,"")}
function ca(a){return a.toLowerCase().replace(/\-[a-z]/g,function(a){return a[1].toUpperCase()})}function v(a,b){function c(){this.constructor=a}c.prototype=b;a.prototype=new c}function x(a){return function(){a.apply(this,arguments);return this}}function y(a){return function(b,c){if("object"!=typeof b)return a.call(this,b,c);for(var d in b)a.call(this,d,b[d])}}function A(a){return function(b,c){if(!s(b))return a.call(this,b,c);for(var d=0;d<b.length;d++)a.call(this,b[d],c)}}
function D(a){return function(b,c){if(!s(c))return a.call(this,b,c);for(var d=0;d<c.length;d++)a.call(this,b,c[d])}}function ra(a){var b;if(b=a.match(sa)){a={e:b[1]||"div",f:{}};b=b[2].match(ta)||[];for(var c=0,d=b.length;c<d;c++)switch(b[c].charAt(0)){case "#":a.f.id=b[c].substr(1);break;case ".":a.f["class"]||(a.f["class"]=""),a.f["class"]+=(a.f["class"]&&" ")+b[c].substr(1)}return a}}
function E(a){this.u=a;var b=this;a.w("change:class",function(a){b.splice(0,b.length);ba(a)&&b.push.apply(b,ba(a).split(/\s+/))})}function F(a){this.e=a;this.b={};this.j={};this.g={};this.classList=new E(this)}function I(a,b){this.q=a;this.p=b}function K(a,b,c){this.q=a;this.G=b;this.p=c}function L(a,b){this.i=a;this.l=b;this.j={}}
function ua(a){a.target=a.target?3===a.target.nodeType?a.target.parentNode:a.target:a.srcElement;a.relatedTarget=a.relatedTarget||("mouseover"==a.type?a.fromElement:a.toElement);a.offsetX=a.offsetX||a.layerX;a.offsetY=a.offsetY||a.layerY;a.keyCode=a.keyCode||a.which;a.metaKey=a.metaKey===g?a.ctrlKey:a.metaKey;a.preventDefault=a.preventDefault||function(){this.returnValue=j};a.stopPropagation=a.stopPropagation||function(){this.cancelBubble=!0};return a}
function va(){function a(){var a;for(i=1;a=b.shift();)a()}var b=[],c,d=document,e=d.documentElement,f=e.doScroll,i=/^loade|^c/.test(d.readyState);d.addEventListener&&d.addEventListener("DOMContentLoaded",c=function(){d.removeEventListener("DOMContentLoaded",c,j);a()},j);f&&d.attachEvent("onreadystatechange",c=function(){/^c/.test(d.readyState)&&(d.detachEvent("onreadystatechange",c),a())});(ready=f?function(a){if(self!=top)i?a():b.push(a);else a:{try{e.doScroll("left")}catch(c){setTimeout(function(){ready(a)},
50);break a}a()}}:function(a){i?a():b.push(a)})()}function wa(a){var b=document.createElement("style");b.type="text/css";b.media=a||"all";document.getElementsByTagName("head")[0].appendChild(b);return b.sheet||b.styleSheet}function M(a,b){L.apply(this,arguments)}function N(a){var b=a[0],a=a[1],c;if(1===b.nodeType){if(c=O.get(b))return new I(c,a)}else if(c=O.get(b.parentNode)){for(var d=0;b.previousSibling;)b=b.previousSibling,d++;return new K(c,d,a)}}function xa(){return Na(F,L)}
function Oa(a){var b=Na(P,M);b.F=a;b.view={getBox:function(a,b){var e=a.a.getBoundingClientRect();if(b){var f=b.a.getBoundingClientRect(),i;for(i in f)e[i]-=f[i]}return e},getStyle:function(a,b){var e;e=a.a;var f,i,h;window.getComputedStyle?(e=e.ownerDocument.defaultView.getComputedStyle(e,g),h=e!=g?e.getPropertyValue(b):void 0,e="opacity"===b&&""===h?"1":h):e.currentStyle?(h=(f=e.currentStyle[b])!=g?f:e.currentStyle[ca(b)],!/^\d+(?:px)?$/i.test(ret)&&/^\d/.test(ret)&&(i=[e.style.left,e.runtimeStyle.left],
f=i[0],i=i[1],e.runtimeStyle.left=e.currentStyle.left,e.style.left="font-size"===b?"1em":h||0,h=e.style.pixelLeft+"px",f=[f,i],e.style.left=f[0],e.runtimeStyle.left=f[1]),e=h):e=void 0;return e},selection:{has:function(){return q.S(a)},getOrigin:function(){return N(q.Q(a))},getFocus:function(){return N(q.P(a))},getStart:function(){return N(q.R(a))},getEnd:function(){return N(q.O(a))},set:function(b,d){return q.U.apply(q,[a].concat(b.r(),d.r()))},unset:function(){return q.L(a)}}};b.K=O;b.getContext=
function(b){var d;if((d=O.get(b))==g)O.set(b,d=new P(b.tagName.toLowerCase(),b,a));return d};b.writeContext=function(a){var d=ra(a||""),e=t(arguments[1])?arguments[1]:{},f=r(arguments,t(arguments[1])?2:1);document.write("<"+d.e+"></"+d.e+">");var i=document.getElementsByTagName(d.e);return b.getContext(i[i.length-1]).set(d.f).set(e).children(f)};b.ready=va;return b}
function Na(a,b){return{Element:a,Query:b,ElementAnchor:I,TextAnchor:K,create:function(a){var b=ra(a||""),e=t(arguments[1])?arguments[1]:{},f=r(arguments,t(arguments[1])?2:1);return(new this.Element(b.e,g,this.F)).set(b.f).set(e).children(f)},parse:function(a){if("object"==typeof a){for(var b=t(a[1])?a[1]:{},e=a.slice(t(a[1])?2:1),f=0;f<e.length;f++)s(e[f])&&(e[f]=this.parse(e[f]));return this.create(a[0],b).children(e)}},dom:Oa,virtual:xa}}var Pa="undefined"!==typeof window;
if("undefined"===typeof Q&&"undefined"===typeof module){var Q=function(){};Q.prototype.v=function(a){return this.hasOwnProperty.call(this.k||(this.k={}),a)?this.k[a]:this.k[a]=[]};Q.prototype.addListener=function(a,b){0!==this.D&&this.v(a).push(b)>(this.D||10)&&console&&console.warn("Possible EventEmitter memory leak detected. "+this.k[a].length+" listeners added. Use emitter.setMaxListeners() to increase limit.");this.h("newListener",a,b);return this};Q.prototype.w=function(a,b){this.addListener(a,
b)};Q.prototype.h=function(a){for(var b=Array.prototype.slice.call(arguments,1),c=0,d=this.v(a).slice();c<d.length;c++)d[c].apply(this,b)}}else"undefined"==typeof Q&&"undefined"!=typeof require&&(Q=require("events").I);var R,Qa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"};R=function(a){return a.replace(/[&<>'"]/g,function(a){return Qa[a]})};
var Ra="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),sa=/(?:^|\s+)([^.#\[\]:\s]*)(\S*)\s*$/,ta=/([:#.]+)([^:#.]+)/g;v(E,[]);E.prototype.contains=function(a){return 0<=aa(this,String(a))};E.prototype.add=function(a){this.contains(a)||this.u.set("class",a+" "+this)};E.prototype.remove=function(a){for(var b="",c=0,d;d=this[c++];)d!=String(a)&&(b+=d+" ");this.u.set("class",b)};E.prototype.toggle=function(a){this.contains(a)?this.add(a):this.remove(a)};
E.prototype.toString=function(){return this.join(" ")};v(F,[]);var Sa=F.prototype,Ta=Q.prototype,S;for(S in Ta)Object.prototype.hasOwnProperty.call(Ta,S)&&(Sa[S]=Ta[S]);F.prototype.get=function(a){return this.b[a]};F.prototype.set=x(y(A(D(function(a,b){this.h("change:"+a,b);this.b[a]=b}))));F.prototype.unset=function(a){this.h("change:"+a);return delete this.b[a]};F.prototype.call=function(a){return this_props[a].apply(this,r(arguments,1))};F.prototype.properties=function(){return JSON.parse(JSON.stringify(this.b))};
F.prototype.persist=function(a){this.g[a]=j};F.prototype.stopPersisting=function(a){this.g[a]=!0};F.prototype.splice=function(a,b){for(var c=0;c<b;c++)"string"!=typeof this[c]&&(this[c].parent=g);for(c=0;c<arguments.length-2;c++){var d=arguments[c+2];"string"!=typeof d&&(d.parent=this)}d=Array.prototype.splice.apply(this,arguments);for(c=0;c<arguments.length-2;c++)this.h("insert",c,arguments[c+2]);return d};
F.prototype.insert=x(function(a,b){"number"!=typeof a&&(b=a,a=-1);0>a&&(a+=this.length+1);this.splice.apply(this,[a,0].concat(b))});F.prototype.remove=x(function(a,b){0>a&&(a+=this.length+1);this.splice(a,b==g?1:b)});F.prototype.children=x(function(a){this.splice.apply(this,[0,this.length].concat(a))});F.prototype.insertSelf=x(function(a,b){a.insert(b,this)});F.prototype.removeSelf=x(function(){this.parent.remove(this.index())});F.prototype.index=function(){return this.parent.indexOf(this)};
F.prototype.spliceText=function(a,b,c,d){if("string"!==typeof this[a])throw Error("Only a string can be spliced.");this[a]=this[a].substr(0,b)+(d||"")+this[a].substr(b+c)};F.prototype.splitText=function(a,b){if("string"!==typeof this[a])throw Error("Cannot split non-text node.");Array.prototype.splice.call(this,a,1,this[a].substr(0,b),this[a].substr(b))};F.prototype.style=x(y(A(D(function(a,b){this.addRule(a,b)}))));F.prototype.rules=function(){return JSON.parse(JSON.stringify(this.j))};
F.prototype.addRule=function(a,b){this.j[a]=b};F.prototype.removeRule=function(a){return delete this.j[a]};F.prototype.query=function(a){return new p.Query(this,a)};F.prototype.findAll=function(a){return this.query(a).findAll()};F.prototype.find=function(a){return this.query(a).find()};F.prototype.toJSON=function(){return[this.e,this.z()].concat(this.map(function(a){return"string"===typeof a?a:a.toJSON()}))};
F.prototype.toHTML=function(){var a=["<"+this.e],b=this.z(),c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&a.push(" "+R(c)+'="'+R(String(b[c]))+'"');a.push(">");if(-1==aa(Ra,this.e)){for(b=0;b<this.length;b++)a.push("string"==typeof this[b]?R(this[b]):this[b].W());a.push("</"+this.e+">")}return a.join("")};I.prototype.type="element";I.prototype.r=function(){return[this.q.a,this.p]};K.prototype.type="text";K.prototype.r=function(){return[this.q.a.childNodes[this.G],this.p]};v(L,Q.prototype);
L.prototype.style=x(y(A(D(function(a,b){this.addRule(a,b)}))));L.prototype.addRule=function(a,b){this.j[a]=b};L.prototype.find=function(){return this.N()[0]};L.prototype.findAll=function(){return queryr(this.l,this.i)};
var T={"for":"htmlFor",accesskey:"accessKey",codebase:"codeBase",frameborder:"frameBorder",framespacing:"frameSpacing",nowrap:"noWrap",maxlength:"maxLength","class":"className",readonly:"readOnly",longdesc:"longDesc",tabindex:"tabIndex",rowspan:"rowSpan",colspan:"colSpan",enctype:"encType",ismap:"isMap",usemap:"useMap",cellpadding:"cellPadding",cellspacing:"cellSpacing"},Ua=1;function $(a){return a.uniqueId||(a.uniqueId=Ua++)}
var O={m:{},set:function(a,b){return O.m[$(a)]=b},get:function(a){return O.m[$(a)]},remove:function(a){return delete O.m[$(a)]}};function P(a,b,c){this.a=b||c.document.createElement(a);F.call(this,a)}v(P,F.prototype);P.prototype.B=function(a){this.parent=a;O.set(this.a,this)};P.prototype.C=function(){delete this.parent;O.remove(this.a)};P.prototype.n="";P.prototype.s=function(){this.n||(this.a.className+=" "+(this.n="tagr-"+$(this.a)));return this.n};
P.prototype.get=function(a){return(T[a]||a)in this.a?this.a[T[a]||a]:this.b[a]};P.prototype.set=x(y(A(D(function(a,b){this.h("change:"+a,b);(T[a]||a)in this.a?this.a[T[a]||a]=b:this.b[a]=b}))));P.prototype.unset=function(a){this.h("change:"+a);return(T[a]||a)in this.a?delete this.a[T[a]||a]:delete this.b[a]};P.prototype.call=function(a){return(T[a]||a)in this.a?this.a[T[a]||a].apply(this.a,r(arguments,1)):this.b[a].apply(this,r(arguments,1))};
P.prototype.properties=function(){var a={},b;for(b in this.b)Object.prototype.hasOwnProperty.call(this.b,b)&&!this.g[b]&&(a[b]=this.b);for(var c=0;c<this.a.attributes.length;c++){var d=this.a.attributes[c];this.g[d.name]!==j&&(a[d.name]=this.a[T[d.name]||d.name])}for(b in this.g)Object.prototype.hasOwnProperty.call(this.g,b)&&(!Object.prototype.hasOwnProperty.call(this.b,b)&&this.g[b]==j)&&(a[b]=this.a[T[b]||b]);return a};
P.prototype.addListener=function(a,b){var c=this;this.a.addEventListener?this.a.addEventListener(a,function(b){return c.emit(a,ua(b))},j):this.a.attachEvent&&this.a.attachEvent("on"+a,function(){return c.emit(a,ua(window.event))});return Q.prototype.addListener.call(this,a,b)};
P.prototype.splice=function(a,b){for(var c=this.a,d=0;d<b;d++)c.removeChild(c.childNodes[a]),"string"!=typeof this[d]&&this[d].C();for(var e=c.childNodes[a],d=0;d<arguments.length-2;d++){var f=arguments[d+2],i;i="string"==typeof arguments[d+2]?this.a.ownerDocument.createTextNode(f):f.a;if(i.parentNode&&1==i.parentNode.nodeType)throw Error("Must remove element before appending elsewhere.");c.insertBefore(i,e);"string"!=typeof f&&f.B(this)}c=Array.prototype.splice.apply(this,arguments);for(d=0;d<arguments.length-
2;d++)this.h("insert",d,arguments[d+2]);return c};P.prototype.push=function(){return this.H.apply(this,[this.length,r(arguments)])};P.prototype.pop=function(){return this.remove(this.length-1)};P.prototype.unshift=function(){return this.H.apply(this,[0].concat(arguments))};P.prototype.shift=function(){return this.remove(0)};P.prototype.sort=function(){};P.prototype.reverse=function(){};
P.prototype.spliceText=function(a,b,c,d){this.a.childNodes[a].replaceData(b,c,d||"");return F.prototype.spliceText.apply(this,arguments)};P.prototype.splitText=function(a,b){this.a.childNodes[a].splitText(b);return F.prototype.splitText.apply(this,arguments)};P.prototype.addRule=function(a,b){try{this.a.style[ca(a)]=ba(b)}catch(c){}return F.prototype.addRule.apply(this,arguments)};var Va={};v(M,L.prototype);
M.prototype.addRule=function(a,b){L.prototype.addRule.apply(this,arguments);var c;c=c||"all";c=Va[c]||(Va[c]=new wa(c));c.insertRule!=g?c.insertRule("."+this.i.s()+" "+this.l+" { "+a+": "+b+" }",c.cssRules.length):c.addRule("."+this.i.s()+" "+this.l,""+a+": "+b);return this};
M.prototype.addListener=function(a,b){var c=this;this.i.w(a,function(a){for(var e=queryr(c.l,c.i),f=p.getContext(a.target||a.srcElement);f!=c.i&&f;f=f.parent)-1<aa(e,f)&&b.call(f,a)});return L.prototype.addListener.call(this,a,b)};p=Pa?Oa(window):xa();"undefined"!==typeof module&&(module.o=p,module.o.V=__dirname+"/lib");
