/*
 Tagr, Solid HTML manipulation for webapps. MIT Licensed.
*/
var g=null,j=!1;
function m(){function a(a){"undefined"!==typeof a.useNativeQSA&&(ea=!a.useNativeQSA?b:Aa?c:b)}function b(a,b){var c=[],d,o,h,C,a=a.replace(Ba,"$1");if(d=a.match(Ca)){C=f(d[2]);d=b.a[T](d[1]||"*");o=0;for(h=d.length;o<h;o++)C.test(d[o].get("class"))&&(c[c.length]=p.getContext(d[o]));return c}i(d=a.split(","),fa(b,function(a,za,d){C=Da(za,a);o=0;for(h=C.length;o<h;o++)if(!a.parent||d||e(C[o],b))c[c.length]=C[o]}));return 1<d.length&&1<c.length?U(c):c}function c(a,c){var y=[],e,d;try{if(!c.parent||!ga.test(a))return n(c.a.querySelectorAll(a));
i(e=a.split(","),fa(c,function(a,b){d=a.a.querySelectorAll(b);1==d.length?y[y.length]=d.item(0):d.length&&(y=y.concat(n(d)))}));return 1<e.length&&1<y.length?U(y):y}catch(f){}return b(a,c)}function e(a,b){return b!==a&&b.a.contains(a.a)}function d(){this.s={}}function f(a){return ha.c(a)||ha.d(a,"(^|\\s+)"+a+"(\\s+|$)",1)}function i(a,b){for(var c=0,e=a.length;c<e;c++)b(a[c])}function h(a){for(var b=[],c=0,e=a.length;c<e;++c)V(a[c])?b=b.concat(a[c]):b[b.length]=a[c];return b}function n(a){for(var b=
0,c=a.length,e=[];b<c;b++)e[b]=p.getContext(a[b]);return e}function ia(a){for(;(a=a.previousSibling)&&1!=a[D];);return a}function W(a){return a.match(Ea)}function X(a,b,c,e,d,i,h,l,r,Xa,Fa){var n,k,w;if(1!==this[D]||b&&"*"!==b&&this[Y]&&this[Y].toLowerCase()!==b||c&&(n=c.match(Ga))&&n[1]!==this.id)return j;if(c&&(w=c.match(Ha)))for(a=w.length;a--;)if(!f(w[a].slice(1)).test(this.className))return j;if(r&&A.A[r]&&!A.A[r](this,Fa))return j;if(e&&!h)for(k in r=this.z(),r)if(Object.prototype.hasOwnProperty.call(r,
k)&&k==d)return this;return e&&!Ia(i,this.get(d)||"",h)?j:this}function k(a){return ja.c(a)||ja.d(a,a.replace(Ja,"\\$1"))}function Ia(a,b,c){switch(a){case "=":return b==c;case "^=":return b.match(l.c("^="+c)||l.d("^="+c,"^"+k(c),1));case "$=":return b.match(l.c("$="+c)||l.d("$="+c,k(c)+"$",1));case "*=":return b.match(l.c(c)||l.d(c,k(c),1));case "~=":return b.match(l.c("~="+c)||l.d("~="+c,"(?:^|\\s+)"+k(c)+"(?:\\s+|$)",1));case "|=":return b.match(l.c("|="+c)||l.d("|="+c,"^"+k(c)+"(-|$)",1))}return 0}
function Da(a,b){var c=[],e=[],d,f,h,l,r;d=b;var k=w.c(a)||w.d(a,a.split(ka)),n=a.match(la);if(!k.length)return c;f=(k=k.slice(0)).pop();if(k.length&&(h=k[k.length-1].match(ma)))d=na(b,h[1]);if(!d)return c;h=W(f);if(d!==b&&9!==d[D]&&n&&/^[+~]$/.test(n[n.length-1])){for(f=[];d=d.nextSibling;)1==d[D]&&(h[1]?h[1]==d[Y].toLowerCase():1)&&(f[f.length]=d);d=f}else d=d[T](h[1]||"*");l=d;d=0;for(f=l.length;d<f;d++)if(r=X.apply(l[d],h))c[c.length]=r;if(!k.length)return c;i(c,function(a){oa(a,k,n)&&(e[e.length]=
a)});return e}function oa(a,b,c,d){function f(a,e,d){for(;d=Ka[c[e]](d,a);)if(H(d)&&X.apply(d,W(b[e])))if(e){if(h=f(d,e-1,d))return h}else return d}var h;return(h=f(a,b.length-1,a))&&(!d||e(h,d))}function H(a){var b;return a&&"object"===typeof a&&(b=a[D])&&(1==b||9==b)}function U(a){var b=[],c,e;c=0;a:for(;c<a.length;++c){for(e=0;e<b.length;++e)if(b[e]==a[c])continue a;b[b.length]=a[c]}return b}function V(a){return"object"===typeof a&&isFinite(a.length)}function na(a,b){var c;return(c=a.a.ownerDocument.getElementById(b))&&
c&&(c=p.getContext(c))&&(e(c,a)||c==a)&&c}function A(a,b){var c,d;if(!b||!a)return[];if(a===window||H(a))return!b||a!==window&&H(b)&&e(a,b)?[a]:[];if(a&&V(a))return h(a);if(c=a.match(La)){if(c[1])return(d=na(b,c[1]))?[d]:[];if(c[2])return n(b.a[T](c[2]));if(Ma&&c[3])return n(b.a[pa](c[3]))}return ea(a,b)}function fa(a,b){return function(c){var e,d;if(ga.test(c)){if(9!==a[D]){if(!(d=e=a.get("id")))a.set("id",d="__qwerymeupscotty");b(a.parent||a,'[id="'+d+'"]'+c,!0);e||a.remove("id")}}else c.length&&
b(a,c,j)}}var J=this.document||{},Na=J.documentElement,pa="getElementsByClassName",T="getElementsByTagName",Y="tagName",D="nodeType",ea,Ga=/#([\w\-]+)/,Ha=/\.[\w\-]+/g,ma=/^#([\w\-]+)$/,Ca=/^([\w]+)?\.([\w\-]+)$/,ga=/(^|,)\s*[>~+]/,Ba=/^\s+|\s*([,\s\+\~>]|$)\s*/g,qa=/[\s\>\+\~]/,ra=/(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/,Ja=/([.*+?\^=!:${}()|\[\]\/\\])/g,La=RegExp(ma.source+"|"+/^([\w\-]+)$/.source+"|"+/^\.([\w\-]+)$/.source),la=RegExp("("+qa.source+")"+ra.source,"g"),
ka=RegExp(qa.source+ra.source),Ea=RegExp(/^(\*|[a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/.source+"("+/\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/.source+")?("+/:([\w\-]+)(\(['"]?([^()]+)['"]?\))?/.source+")?"),Ka={" ":function(a){return a&&a!==Na&&a.parentNode},">":function(a,b){return a&&a.parentNode==b.parentNode&&a.parentNode},"~":function(a){return a&&a.previousSibling},"+":function(a,b,c,e){return!a?j:(c=ia(a))&&(e=ia(b))&&c==e&&c}};d.prototype={c:function(a){return this.s[a]||
void 0},d:function(a,b,c){b=c?RegExp(b):b;return this.s[a]=b}};var ha=new d,ja=new d,l=new d,w=new d,Ma=!!J[pa],Aa=J.querySelector&&J.querySelectorAll;a({W:!0});A.L=a;A.V=U;A.S=function(a,b,c){if(H(b))return a==b;if(V(b))return!!~h(b).indexOf(a);for(var e=b.split(","),d;b=e.pop();)if(d=w.c(b)||w.d(b,b.split(ka)),b=b.match(la),d=d.slice(0),X.apply(a,W(d.pop()))&&(!d.length||oa(a,d,b,c)))return!0;return j};A.A={};return A}
"undefined"!=typeof module&&module.u?module.u=m():"function"==typeof this.define&&this.define.amd?define("queryr",m):this.queryr=m();
if("undefined"===typeof q&&"undefined"===typeof module){var q=function(){};q.prototype.v=function(a){return this.hasOwnProperty.call(this.k||(this.k={}),a)?this.k[a]:this.k[a]=[]};q.prototype.addListener=function(a,b){0!==this.C&&this.v(a).push(b)>(this.C||10)&&console&&console.warn("Possible EventEmitter memory leak detected. "+this.k[a].length+" listeners added. Use emitter.setMaxListeners() to increase limit.");this.j("newListener",a,b);return this};q.prototype.w=function(a,b){this.addListener(a,
b)};q.prototype.j=function(a){for(var b=Array.prototype.slice.call(arguments,1),c=0,e=this.v(a).slice();c<e.length;c++)e[c].apply(this,b)}}else q=require("events").H;var p,s=this.I;function t(a,b){return Array.prototype.slice.call(a,b)}function u(a){return"[object Array]"===Object.prototype.toString.call(a)}function v(a){return"[object Object]"==Object.prototype.toString.call(a)}function x(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1}
function aa(a){return a.replace(/^\s+|\s+$/g,"")}function ba(a){return a.toLowerCase().replace(/\-[a-z]/g,function(a){return a[1].toUpperCase()})}function z(a,b){function c(){this.constructor=a}c.prototype=b;a.prototype=new c}function B(a){return function(){a.apply(this,arguments);return this}}function E(a){return function(b,c){if("object"!=typeof b)return a.call(this,b,c);for(var e in b)a.call(this,e,b[e])}}
function F(a){return function(b,c){if(!u(b))return a.call(this,b,c);for(var e=0;e<b.length;e++)a.call(this,b[e],c)}}function G(a){return function(b,c){if(!u(c))return a.call(this,b,c);for(var e=0;e<c.length;e++)a.call(this,b,c[e])}}
function ca(a){var b;if(b=a.match(da)){a={e:b[1]||"div",f:{}};b=b[2].match(sa)||[];for(var c=0,e=b.length;c<e;c++)switch(b[c].charAt(0)){case "#":a.f.id=b[c].substr(1);break;case ".":a.f["class"]||(a.f["class"]=""),a.f["class"]+=(a.f["class"]&&" ")+b[c].substr(1)}return a}}function K(a){this.t=a;var b=this;a.w("change:class",function(a){b.splice(0,b.length);aa(a)&&b.push.apply(b,aa(a).split(/\s+/))})}function L(a){this.e=a;this.b={};this.i={};this.g={};this.classList=new K(this)}
function ta(a,b){this.p=a;this.o=b}function ua(a,b,c){this.p=a;this.F=b;this.o=c}function M(a,b){this.h=a;this.l=b;this.i={}}
function va(a){a.target=a.target?3===a.target.nodeType?a.target.parentNode:a.target:a.srcElement;a.relatedTarget=a.relatedTarget||("mouseover"==a.type?a.fromElement:a.toElement);a.offsetX=a.offsetX||a.layerX;a.offsetY=a.offsetY||a.layerY;a.keyCode=a.keyCode||a.which;a.metaKey=a.metaKey===g?a.ctrlKey:a.metaKey;a.preventDefault=a.preventDefault||function(){this.returnValue=j};a.stopPropagation=a.stopPropagation||function(){this.cancelBubble=!0};return a}
function wa(){function a(){var a;for(i=1;a=b.shift();)a()}var b=[],c,e=document,d=e.documentElement,f=d.doScroll,i=/^loade|^c/.test(e.readyState);e.addEventListener&&e.addEventListener("DOMContentLoaded",c=function(){e.removeEventListener("DOMContentLoaded",c,j);a()},j);f&&e.attachEvent("onreadystatechange",c=function(){/^c/.test(e.readyState)&&(e.detachEvent("onreadystatechange",c),a())});(ready=f?function(a){if(self!=top)i?a():b.push(a);else a:{try{d.doScroll("left")}catch(c){setTimeout(function(){ready(a)},
50);break a}a()}}:function(a){i?a():b.push(a)})()}function xa(a){var b=document.createElement("style");b.type="text/css";b.media=a||"all";document.getElementsByTagName("head")[0].appendChild(b);return b.sheet||b.styleSheet}function N(a,b){M.apply(this,arguments)}function O(){var a=(void 0)[0],b=(void 0)[1],c;if(1===a.nodeType){if(c=P.get(a))return new ta(c,b)}else if(c=P.get(a.parentNode)){for(var e=0;a.previousSibling;)a=a.previousSibling,e++;return new ua(c,e,b)}}function ya(){return Oa(L,M)}
function Pa(a){var b=Oa(Q,N);b.D=a;b.view={getBox:function(a,b){var d=a.a.getBoundingClientRect();if(b){var f=b.a.getBoundingClientRect(),i;for(i in f)d[i]-=f[i]}return d},getStyle:function(a,b){var d;d=a.a;var f,i,h;window.getComputedStyle?(d=d.ownerDocument.defaultView.getComputedStyle(d,g),h=d!=g?d.getPropertyValue(b):void 0,d="opacity"===b&&""===h?"1":h):d.currentStyle?(h=(f=d.currentStyle[b])!=g?f:d.currentStyle[ba(b)],!/^\d+(?:px)?$/i.test(ret)&&/^\d/.test(ret)&&(i=[d.style.left,d.runtimeStyle.left],
f=i[0],i=i[1],d.runtimeStyle.left=d.currentStyle.left,d.style.left="font-size"===b?"1em":h||0,h=d.style.pixelLeft+"px",f=[f,i],d.style.left=f[0],d.runtimeStyle.left=f[1]),d=h):d=void 0;return d},selection:{has:function(){return s.R(a)},getOrigin:function(){return O(s.P(a))},getFocus:function(){return O(s.O(a))},getStart:function(){return O(s.Q(a))},getEnd:function(){return O(s.N(a))},set:function(b,e){return s.T.apply(s,[a].concat(b.q(),e.q()))},unset:function(){return s.K(a)}}};b.J=P;b.getContext=
function(b){var e;if((e=P.get(b))==g)P.set(b,e=new Q(b.tagName.toLowerCase(),b,a));return e};b.writeContext=function(a){var e=ca(a||""),d=v(arguments[1])?arguments[1]:{},f=t(arguments,v(arguments[1])?2:1);document.write("<"+e.e+"></"+e.e+">");var i=document.getElementsByTagName(e.e);return b.getContext(i[i.length-1]).set(e.f).set(d).children(f)};b.ready=wa;return b}
function Oa(a,b){return{Element:a,Query:b,ElementAnchor:ta,TextAnchor:ua,create:function(a){var b=ca(a||""),d=v(arguments[1])?arguments[1]:{},f=t(arguments,v(arguments[1])?2:1);return(new this.Element(b.e,g,this.D)).set(b.f).set(d).children(f)},parse:function(a){if("object"==typeof a){for(var b=v(a[1])?a[1]:{},d=a.slice(v(a[1])?2:1),f=0;f<d.length;f++)u(d[f])&&(d[f]=this.parse(d[f]));return this.create(a[0],b).children(d)}},dom:Pa,virtual:ya}}
var Qa="undefined"!==typeof window,R,Ra={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"};R=function(a){return a.replace(/[&<>'"]/g,function(a){return Ra[a]})};var Sa="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),da=/(?:^|\s+)([^.#\[\]:\s]*)(\S*)\s*$/,sa=/([:#.]+)([^:#.]+)/g;z(K,[]);K.prototype.contains=function(a){return 0<=x(this,String(a))};K.prototype.add=function(a){this.contains(a)||this.t.set("class",a+" "+this)};
K.prototype.remove=function(a){for(var b="",c=0,e;e=this[c++];)e!=String(a)&&(b+=e+" ");this.t.set("class",b)};K.prototype.toggle=function(a){this.contains(a)?this.add(a):this.remove(a)};K.prototype.toString=function(){return this.join(" ")};z(L,[]);var Ta=L.prototype,Ua=q.prototype,S;for(S in Ua)Object.prototype.hasOwnProperty.call(Ua,S)&&(Ta[S]=Ua[S]);L.prototype.get=function(a){return this.b[a]};L.prototype.set=B(E(F(G(function(a,b){this.j("change:"+a,b);this.b[a]=b}))));
L.prototype.unset=function(a){this.j("change:"+a);return delete this.b[a]};L.prototype.call=function(a){return this_props[a].apply(this,t(arguments,1))};L.prototype.properties=function(){return JSON.parse(JSON.stringify(this.b))};L.prototype.persist=function(a){this.g[a]=j};L.prototype.stopPersisting=function(a){this.g[a]=!0};L.prototype.insert=B(function(a,b){0>a&&(a+=this.length+1);this.splice.apply(this,[a,0].concat(b))});
L.prototype.remove=B(function(a,b){0>a&&(a+=this.length+1);this.splice(a,b==g?1:b)});L.prototype.children=B(function(a){this.splice.apply(this,[0,this.length].concat(a))});L.prototype.insertSelf=B(function(a,b){a.insert(b,this)});L.prototype.removeSelf=B(function(){this.parent.remove(this.index())});L.prototype.index=function(){return this.parent.indexOf(this)};
L.prototype.spliceText=function(a,b,c,e){if("string"!==typeof this[a])throw Error("Only a string can be spliced.");this[a]=this[a].substr(0,b)+(e||"")+this[a].substr(b+c)};L.prototype.splitText=function(a,b){if("string"!==typeof this[a])throw Error("Cannot split non-text node.");Array.prototype.splice.call(this,a,1,this[a].substr(0,b),this[a].substr(b))};L.prototype.style=B(E(F(G(function(a,b){this.addRule(a,b)}))));L.prototype.rules=function(){return JSON.parse(JSON.stringify(this.i))};
L.prototype.addRule=function(a,b){this.i[a]=b};L.prototype.removeRule=function(a){return delete this.i[a]};L.prototype.query=function(a){return new p.Query(this,a)};L.prototype.findAll=function(a){return this.query(a).findAll()};L.prototype.find=function(a){return this.query(a).find()};L.prototype.toJSON=function(){return[this.e,this.z()].concat(this.map(function(a){return"string"===typeof a?a:a.toJSON()}))};
L.prototype.toHTML=function(){var a=["<"+this.e],b=this.z(),c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&a.push(" "+R(c)+'="'+R(String(b[c]))+'"');a.push(">");if(-1==x(Sa,this.e)){for(b=0;b<this.length;b++)a.push("string"==typeof this[b]?R(this[b]):this[b].U());a.push("</"+this.e+">")}return a.join("")};ta.prototype.q=function(){return[this.p.a,this.o]};ua.prototype.q=function(){return[this.p.a.childNodes[this.F],this.o]};z(M,q.prototype);
M.prototype.style=B(E(F(G(function(a,b){this.addRule(a,b)}))));M.prototype.addRule=function(a,b){this.i[a]=b};M.prototype.find=function(){return this.M()[0]};M.prototype.findAll=function(){return queryr(this.l,this.h)};
var Z={"for":"htmlFor",accesskey:"accessKey",codebase:"codeBase",frameborder:"frameBorder",framespacing:"frameSpacing",nowrap:"noWrap",maxlength:"maxLength","class":"className",readonly:"readOnly",longdesc:"longDesc",tabindex:"tabIndex",rowspan:"rowSpan",colspan:"colSpan",enctype:"encType",ismap:"isMap",usemap:"useMap",cellpadding:"cellPadding",cellspacing:"cellSpacing"},Va=1;function $(a){return a.uniqueId||(a.uniqueId=Va++)}
var P={m:{},set:function(a,b){return P.m[$(a)]=b},get:function(a){return P.m[$(a)]},remove:function(a){return delete P.m[$(a)]}};function Q(a,b,c){this.a=b||c.document.createElement(a);L.call(this,a)}z(Q,L.prototype);Q.prototype.B=function(a){this.parent=a;P.set(this.a,this)};Q.prototype.n="";Q.prototype.r=function(){this.n||(this.a.className+=" "+(this.n="tagr-"+$(this.a)));return this.n};Q.prototype.get=function(a){return(Z[a]||a)in this.a?this.a[Z[a]||a]:this.b[a]};
Q.prototype.set=B(E(F(G(function(a,b){this.j("change:"+a,b);(Z[a]||a)in this.a?this.a[Z[a]||a]=b:this.b[a]=b}))));Q.prototype.unset=function(a){this.j("change:"+a);return(Z[a]||a)in this.a?delete this.a[Z[a]||a]:delete this.b[a]};Q.prototype.call=function(a){return(Z[a]||a)in this.a?this.a[Z[a]||a].apply(this.a,t(arguments,1)):this.b[a].apply(this,t(arguments,1))};
Q.prototype.properties=function(){var a={},b;for(b in this.b)Object.prototype.hasOwnProperty.call(this.b,b)&&!this.g[b]&&(a[b]=this.b);for(var c=0;c<this.a.attributes.length;c++){var e=this.a.attributes[c];this.g[e.name]!==j&&(a[e.name]=this.a[Z[e.name]||e.name])}for(b in this.g)Object.prototype.hasOwnProperty.call(this.g,b)&&(!Object.prototype.hasOwnProperty.call(this.b,b)&&this.g[b]==j)&&(a[b]=this.a[Z[b]||b]);return a};
Q.prototype.addListener=function(a,b){var c=this;this.a.addEventListener?this.a.addEventListener(a,function(b){return c.emit(a,va(b))},j):this.a.attachEvent&&this.a.attachEvent("on"+a,function(){return c.emit(a,va(window.event))});return q.prototype.addListener.call(this,a,b)};
Q.prototype.splice=function(a,b){for(var c=this.a,e=0;e<b;e++)c.removeChild(c.childNodes[a]);for(var d=c.childNodes[a],e=0;e<arguments.length-2;e++){var f=arguments[e+2],i;i="string"==typeof arguments[e+2]?this.a.ownerDocument.createTextNode(f):f.a;if(i.parentNode&&1==i.parentNode.nodeType)throw Error("Must remove element before appending elsewhere.");c.insertBefore(i,d);"string"!=typeof f&&f.B(this)}return Array.prototype.splice.apply(this,arguments)};
Q.prototype.push=function(){return this.G.apply(this,[this.length,t(arguments)])};Q.prototype.pop=function(){return this.remove(this.length-1)};Q.prototype.unshift=function(){return this.G.apply(this,[0].concat(arguments))};Q.prototype.shift=function(){return this.remove(0)};Q.prototype.sort=function(){};Q.prototype.reverse=function(){};Q.prototype.spliceText=function(a,b,c,e){this.a.childNodes[a].replaceData(b,c,e||"");return L.prototype.spliceText.apply(this,arguments)};
Q.prototype.splitText=function(a,b){this.a.childNodes[a].splitText(b);return L.prototype.splitText.apply(this,arguments)};Q.prototype.addRule=function(a,b){try{this.a.style[ba(a)]=aa(b)}catch(c){}return L.prototype.addRule.apply(this,arguments)};var Wa={};z(N,M.prototype);
N.prototype.addRule=function(a,b){M.prototype.addRule.apply(this,arguments);var c;c=c||"all";c=Wa[c]||(Wa[c]=new xa(c));c.insertRule!=g?c.insertRule("."+this.h.r()+" "+this.l+" { "+a+": "+b+" }",c.cssRules.length):c.addRule("."+this.h.r()+" "+this.l,""+a+": "+b);return this};
N.prototype.addListener=function(a,b){var c=this;this.h.w(a,function(a){for(var d=queryr(c.l,c.h),f=p.getContext(a.target||a.srcElement);f!=c.h&&f;f=f.parent)-1<x(d,f)&&b.call(f,a)});return M.prototype.addListener.call(this,a,b)};p=Qa?Pa(window):ya();"undefined"!==typeof module&&(module.u=p);
